<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETF 单品轮动 + RSRS 市场择时 - 策略详情</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 30px;
            line-height: 1.8;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .meta { color: #888; margin-bottom: 30px; font-size: 0.9rem; }
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section h2 {
            font-size: 1.2rem;
            color: #00d4ff;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .section p, .section pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #ccc;
        }
        pre {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
        }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .back-btn:hover { opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { background: rgba(0,0,0,0.2); color: #00d4ff; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-btn">← 返回列表</a>
        <h1>ETF 单品轮动 + RSRS 市场择时</h1>
        <p class="meta">
            ID: 855dfa6f | 
            类型: 动量策略 | 
            来源: b2324_54.ETF轮动策略-入门1.0.txt |
            分析日期: 2026-01-11 18:21:08
        </p>

        <div class="section">
            <h2>策略逻辑概要</h2>
            <p>先在 3 只宽基 ETF 里用 29 日动量 (年化收益×R²) 打分，只买评分最高的 1 只；再用沪深 300 的 RSRS 修正标准分 ×MA 组合择时信号决定全仓买、全仓卖或持有。涨跌停 / ST / 停牌过滤保证可成交，20% 跌幅止损作为兜底。</p>
        </div>

        <div class="section">
            <h2>股票池</h2>
            <p>初始固定池：[159915 创业板, 510300 沪深300, 510500 中证500]，过滤 ST、停牌、涨跌停；无流动性/上市天数/市值进一步限制。</p>
        </div>

        <div class="section">
            <h2>买入信号</h2>
            <p>RSRS 修正标准分 &gt; 0.7 且 20 日 MA(今) &gt; 20 日 MA(3 日前), 动量排名 = 1 的 ETF 列表(过滤后) 非空</p>
        </div>

        <div class="section">
            <h2>卖出信号</h2>
            <p>RSRS 修正标准分 &lt; -0.7 且 20 日 MA(今) &lt; 20 日 MA(3 日前), 强制：若动量第一名为 510300.XSHG 则直接 SELL, 持仓跌幅 ≤-20% 触发止损</p>
        </div>

        <div class="section">
            <h2>仓位管理</h2>
            <p>最多只持 1 只 ETF，仓位＝全部可用资金；止损阈值 ‑20%；滑点固定 0.1%；佣金万 1，无印花税。</p>
        </div>

        <div class="section">
            <h2>交易频率</h2>
            <p>run_daily 在 09:30 做调仓，理想情况下可能每天换仓一次，也可能连续持有数日；止损检查在 open 时刻同步执行。</p>
        </div>

        <div class="section">
            <h2>手动执行指南</h2>
            <p>盘前：读取昨日收盘价计算动量/RSRS，生成待买 ETF 清单；09:30 开盘后一次性平仓/买入；盘中无任何操作；收盘后记录成交与持仓。</p>
        </div>

        <div class="section">
            <h2>代码审计详情</h2>
            <p>全部历史数据通过 attribute_history/ history，且函数在 09:30 调用不含当日收盘价；已 set_option(&#x27;avoid_future_data&#x27;,True)。</p>
        </div>

        <div class="section">
            <h2>灰色区域警告</h2>
            <p>history(1,&#x27;1m&#x27;) 在 09:30 之前若无前一分钟数据会返回 NaN，需加容错。, initialize 中 initial_slope_series 在回测首日调取 618 日历史数据，实盘须保证数据完整。</p>
        </div>

        <div class="section">
            <h2>执行分析</h2>
            <p>高流动性、低换手、信号日级，任何资金规模都能轻松成交。</p>
        </div>

        <div class="section">
            <h2>10万资金场景</h2>
            <p>一次性买卖 10 万成交无压力，冲击成本忽略。</p>
        </div>

        <div class="section">
            <h2>100万资金场景</h2>
            <p>同上。</p>
        </div>

        <div class="section">
            <h2>1000万资金场景</h2>
            <p>主流 ETF 单日成交额数十亿，仍能在 1% 以内冲击完成。</p>
        </div>

        <div class="section">
            <h2>1亿资金场景</h2>
            <p>1 亿资金占日成交量极小，需分笔但问题不大。</p>
        </div>

        <div class="section">
            <h2>大资金不友好原因</h2>
            <p>宽基 ETF 容量巨大，几乎无容量上限。</p>
        </div>

        <div class="section">
            <h2>行为偏差利用原因</h2>
            <p>盈利主要来自动量/趋势，部分利用市场惯性；并非纯行为偏差捕捉。</p>
        </div>

        <div class="section">
            <h2>跨阶段稳健性原因</h2>
            <p>参数较多 (29,18,600,20,3,0.7) 且针对沪深 300 做 RSRS，跨市场/跨周期未验证，稳健性中等。</p>
        </div>

        <div class="section">
            <h2>最差环境</h2>
            <p>横盘震荡且风格快速切换, 重大跳水后 V 型反转导致止损-重买频繁</p>
        </div>

        <div class="section">
            <h2>可验证预测</h2>
            <p>过去 29 日延续涨势的 ETF 下阶段仍胜出, 沪深300 RSRS&gt;0.7 同时 20 日 MA 上穿 3 日前 MA 时市场大概率上行, 动量反转发生时持仓变为空仓可回避下跌</p>
        </div>

        <div class="section">
            <h2>一句话总结</h2>
            <p>逻辑简洁、执行容易，但参数较多且对 510300 的硬编码显得武断，需进一步稳健性检验。</p>
        </div>

        <div class="section">
            <h2>优化建议</h2>
            <p>使用滚动窗口验证不同参数组合；将 ‘强制 SELL 510300’ 替换为多 ETF 分散或权重调整；考虑加入波动率/流动性过滤以减少无效换仓。</p>
        </div>

        <div class="section">
            <h2>假设条件</h2>
            <p>未给定资金规模，评估默认 10 万–1 亿区间, 实际 ETF 佣金与滑点按代码设置 (万 1 佣金、0.1% 固定滑点)；未考虑券商最低 5 元限制的边际影响</p>
        </div>

        <div class="section">
            <h2>评分汇总</h2>
            <table>
                <tr><th>指标</th><th>分数</th></tr>
                <tr><td>未来函数风险</td><td>2</td></tr>
                <tr><td>滑点</td><td>2</td></tr>
                <tr><td>成本</td><td>3</td></tr>
                <tr><td>执行难度</td><td>2</td></tr>
                <tr><td>时间敏感性</td><td>4</td></tr>
                <tr><td>综合可执行性</td><td>8.6</td></tr>
                <tr><td>大资金不友好</td><td>2</td></tr>
                <tr><td>行为偏差利用</td><td>4</td></tr>
                <tr><td>跨阶段稳健性</td><td>5</td></tr>
                <tr><td>有效性总分</td><td>3.7</td></tr>
                <tr><td>总分</td><td>59.0</td></tr>
            </table>
        </div>

        <div class="section">
            <h2>原始AI响应</h2>
            <pre>```json
{
    &quot;strategy_name&quot;: &quot;ETF 单品轮动 + RSRS 市场择时&quot;,
    &quot;strategy_type&quot;: &quot;动量策略&quot;,
    
    &quot;strategy_explanation&quot;: {
        &quot;core_logic&quot;: &quot;先在 3 只宽基 ETF 里用 29 日动量 (年化收益×R²) 打分，只买评分最高的 1 只；再用沪深 300 的 RSRS 修正标准分 ×MA 组合择时信号决定全仓买、全仓卖或持有。涨跌停 / ST / 停牌过滤保证可成交，20% 跌幅止损作为兜底。&quot;,
        &quot;data_and_indicators&quot;: &quot;价格数据：日 K high/low/close、1 分钟 close；指标：动量斜率、R²、RSRS 斜率序列(18 日窗口)、600 日 z-score、20 日 MA。所有数据均为每天盘前/盘中实时调用价格接口，财务数据未使用。&quot;,
        &quot;stock_pool&quot;: &quot;初始固定池：[159915 创业板, 510300 沪深300, 510500 中证500]，过滤 ST、停牌、涨跌停；无流动性/上市天数/市值进一步限制。&quot;,
        &quot;buy_signals&quot;: [&quot;RSRS 修正标准分 &gt; 0.7 且 20 日 MA(今) &gt; 20 日 MA(3 日前)&quot;, &quot;动量排名 = 1 的 ETF 列表(过滤后) 非空&quot;],
        &quot;sell_signals&quot;: [&quot;RSRS 修正标准分 &lt; -0.7 且 20 日 MA(今) &lt; 20 日 MA(3 日前)&quot;, &quot;强制：若动量第一名为 510300.XSHG 则直接 SELL&quot;, &quot;持仓跌幅 ≤-20% 触发止损&quot;],
        &quot;position_and_risk&quot;: &quot;最多只持 1 只 ETF，仓位＝全部可用资金；止损阈值 ‑20%；滑点固定 0.1%；佣金万 1，无印花税。&quot;,
        &quot;trading_frequency&quot;: &quot;run_daily 在 09:30 做调仓，理想情况下可能每天换仓一次，也可能连续持有数日；止损检查在 open 时刻同步执行。&quot;,
        &quot;manual_execution_guide&quot;: &quot;盘前：读取昨日收盘价计算动量/RSRS，生成待买 ETF 清单；09:30 开盘后一次性平仓/买入；盘中无任何操作；收盘后记录成交与持仓。&quot;
    },
    
    &quot;future_function_detection&quot;: {
        &quot;has_future_function&quot;: &quot;否&quot;,
        &quot;risk_level&quot;: &quot;低&quot;,
        &quot;risk_score&quot;: 2,
        &quot;risk_score_reason&quot;: &quot;全部历史数据通过 attribute_history/ history，且函数在 09:30 调用不含当日收盘价；已 set_option(&#x27;avoid_future_data&#x27;,True)。&quot;,
        &quot;detailed_analysis&quot;: {
            &quot;price_data_leak&quot;: &quot;未使用当日尚未产生的收盘价；history(1,&#x27;1m&#x27;) 调用的是已完成的上一分钟数据，风险可接受。&quot;,
            &quot;financial_data_leak&quot;: &quot;未使用财务数据。&quot;,
            &quot;index_component_leak&quot;: &quot;无成分股循环或未来权重引用。&quot;,
            &quot;backtest_engine_leak&quot;: &quot;未见明显依赖回测引擎未来信息的变量。&quot;
        },
        &quot;fix_suggestions&quot;: &quot;若需在 09:30 之前下单，改用 yesterday 的数据缓存，彻底消除分钟级未来价争议。&quot;,
        &quot;gray_area_warnings&quot;: [&quot;history(1,&#x27;1m&#x27;) 在 09:30 之前若无前一分钟数据会返回 NaN，需加容错。&quot;, &quot;initialize 中 initial_slope_series 在回测首日调取 618 日历史数据，实盘须保证数据完整。&quot;]
    },
    
    &quot;execution_difficulty&quot;: {
        &quot;slippage_score&quot;: 2,
        &quot;slippage_reason&quot;: &quot;目标均为高流动性宽基 ETF，固定 0.1% 滑点已较保守。&quot;,
        &quot;cost_score&quot;: 3,
        &quot;cost_reason&quot;: &quot;理论上可日调仓，但平均换手有限，且基金佣金万 1 已极低。&quot;,
        &quot;execution_score&quot;: 2,
        &quot;execution_reason&quot;: &quot;单票大单成交容易，整体仓位≤1 单。&quot;,
        &quot;time_sensitivity_score&quot;: 4,
        &quot;time_sensitivity_reason&quot;: &quot;信号依赖昨日数据，09:30 下单要求固定时点但不需毫秒级；错过上午亦可按收盘价执行。&quot;,
        &quot;overall_executability&quot;: 8,
        &quot;overall_reason&quot;: &quot;高流动性、低换手、信号日级，任何资金规模都能轻松成交。&quot;,
        &quot;scenario_analysis&quot;: {
            &quot;10w&quot;: &quot;一次性买卖 10 万成交无压力，冲击成本忽略。&quot;,
            &quot;100w&quot;: &quot;同上。&quot;,
            &quot;1000w&quot;: &quot;主流 ETF 单日成交额数十亿，仍能在 1% 以内冲击完成。&quot;,
            &quot;1y&quot;: &quot;1 亿资金占日成交量极小，需分笔但问题不大。&quot;
        },
        &quot;improvement_suggestions&quot;: [&quot;取消对 510300 的强制 SELL 限制，或改为权重控制，避免空仓率过高。&quot;, &quot;加入成交量过滤／成交额阈值判断，保证极端行情下仍能全额成交。&quot;]
    },
    
    &quot;effectiveness&quot;: {
        &quot;large_fund_unfriendly_score&quot;: 2,
        &quot;large_fund_unfriendly_reason&quot;: &quot;宽基 ETF 容量巨大，几乎无容量上限。&quot;,
        &quot;behavioral_bias_score&quot;: 4,
        &quot;behavioral_bias_reason&quot;: &quot;盈利主要来自动量/趋势，部分利用市场惯性；并非纯行为偏差捕捉。&quot;,
        &quot;cross_period_robustness_score&quot;: 5,
        &quot;cross_period_robustness_reason&quot;: &quot;参数较多 (29,18,600,20,3,0.7) 且针对沪深 300 做 RSRS，跨市场/跨周期未验证，稳健性中等。&quot;,
        &quot;effectiveness_total_score&quot;: 3.5,
        &quot;weight_explanation&quot;: &quot;大资金友好度 40% + 行为利用度 30% + 跨阶段稳健 30%&quot;,
        &quot;worst_environments&quot;: [&quot;横盘震荡且风格快速切换&quot;, &quot;重大跳水后 V 型反转导致止损-重买频繁&quot;],
        &quot;verifiable_predictions&quot;: [&quot;过去 29 日延续涨势的 ETF 下阶段仍胜出&quot;, &quot;沪深300 RSRS&gt;0.7 同时 20 日 MA 上穿 3 日前 MA 时市场大概率上行&quot;, &quot;动量反转发生时持仓变为空仓可回避下跌&quot;]
    },
    
    &quot;conclusion&quot;: {
        &quot;verdict&quot;: &quot;逻辑简洁、执行容易，但参数较多且对 510300 的硬编码显得武断，需进一步稳健性检验。&quot;,
        &quot;recommendation&quot;: &quot;小仓实测&quot;,
        &quot;optimization_suggestions&quot;: &quot;使用滚动窗口验证不同参数组合；将 ‘强制 SELL 510300’ 替换为多 ETF 分散或权重调整；考虑加入波动率/流动性过滤以减少无效换仓。&quot;
    },
    
    &quot;score_summary&quot;: {
        &quot;future_function_risk&quot;: 2,
        &quot;slippage&quot;: 2,
        &quot;cost&quot;: 3,
        &quot;execution&quot;: 2,
        &quot;time_sensitivity&quot;: 4,
        &quot;executability&quot;: 8,
        &quot;effectiveness_a&quot;: 2,
        &quot;effectiveness_b&quot;: 4,
        &quot;effectiveness_c&quot;: 5,
        &quot;effectiveness_total&quot;: 3.5
    },
    
    &quot;assumptions&quot;: [&quot;未给定资金规模，评估默认 10 万–1 亿区间&quot;, &quot;实际 ETF 佣金与滑点按代码设置 (万 1 佣金、0.1% 固定滑点)；未考虑券商最低 5 元限制的边际影响&quot;]
}
```</pre>
        </div>

    </div>
</body>
</html>