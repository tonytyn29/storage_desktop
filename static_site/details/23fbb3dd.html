<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>四支ETF安全动量单轮动 - 策略详情</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 30px;
            line-height: 1.8;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .meta { color: #888; margin-bottom: 30px; font-size: 0.9rem; }
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section h2 {
            font-size: 1.2rem;
            color: #00d4ff;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .section p, .section pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #ccc;
        }
        pre {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
        }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .back-btn:hover { opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { background: rgba(0,0,0,0.2); color: #00d4ff; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-btn">← 返回列表</a>
        <h1>四支ETF安全动量单轮动</h1>
        <p class="meta">
            ID: 23fbb3dd | 
            类型: 动量策略 | 
            来源: b25_14安全摸狗策略.txt |
            分析日期: 2026-01-10 22:05:12
        </p>

        <div class="section">
            <h2>策略逻辑概要</h2>
            <p>在四只高流动性的ETF中，计算最近25个交易日的对数价格线性回归斜率（代表年化动量）并乘以加权R²作为综合得分；仅当得分为正且不高于5时认定为“安全动量”，每天 09:30 挑选得分最高的一只 ETF 满仓持有，其余全部清仓。通过在上涨早期买入强势品种、在动量转弱时空仓或切换来获取趋势收益、避免过度追高。</p>
        </div>

        <div class="section">
            <h2>股票池</h2>
            <p>固定 ETF 池：黄金(518880)、纳指100(513100)、创业板100(159915)、上证180(510180)。无 ST/停牌等过滤（ETF 亦无 ST）。</p>
        </div>

        <div class="section">
            <h2>买入信号</h2>
            <p>在每日 09:30 重新计算得分后，排名第一且得分介于 0~5 的 ETF, 当前持仓数量不足 1 只</p>
        </div>

        <div class="section">
            <h2>卖出信号</h2>
            <p>持仓 ETF 不再位列安全动量第一名, 其得分跌至 ≤0 或 &gt;5（被 get_rank 过滤掉）</p>
        </div>

        <div class="section">
            <h2>仓位管理</h2>
            <p>最多同时持有 1 只 ETF，仓位=可用资金全仓；无显式止损/止盈；当全部得分≤0 或 &gt;5 时空仓。</p>
        </div>

        <div class="section">
            <h2>交易频率</h2>
            <p>理论上每日 09:30 检查并可能换仓；实际换手取决于动量排序变化，估计月均换手 1~2 次。</p>
        </div>

        <div class="section">
            <h2>手动执行指南</h2>
            <p>若手动执行，可在开盘前或开盘后尽快（09:30 左右）根据前一日收盘价计算得分并下单，或于收盘后计算并次日开盘挂单。</p>
        </div>

        <div class="section">
            <h2>代码审计详情</h2>
            <p>仅使用 attribute_history（在 09:30 调用时不包含当日盘中数据）；未见 use of history_bars with forward-shift, no scheduled functions at T&gt;0, avoid_future_data 打开。</p>
        </div>

        <div class="section">
            <h2>灰色区域警告</h2>
            <p>盘中 09:30 调用 attribute_history 时可能把当日开盘价计入可交易价格，形成微弱同频干预，虽风险有限但需验证。, 当全部 ETF 得分被过滤后系统空仓，可能导致回测时高夏普但真实资金闲置，需另设现金管理资产。, score 上限 5 为经验值，过度依赖历史调参，存在数据窥探（但非未来函数）风险</p>
        </div>

        <div class="section">
            <h2>执行分析</h2>
            <p>低频、高流动性、极简持仓，实盘易于执行。</p>
        </div>

        <div class="section">
            <h2>10万资金场景</h2>
            <p>完全可执行，买入1手起步。</p>
        </div>

        <div class="section">
            <h2>100万资金场景</h2>
            <p>流动性充裕，冲击极低。</p>
        </div>

        <div class="section">
            <h2>1000万资金场景</h2>
            <p>单笔成交占比&lt;1%日均成交量，仍可一次性成交或分笔完成。</p>
        </div>

        <div class="section">
            <h2>1亿资金场景</h2>
            <p>仍可执行，但需注意大额申赎带来的折价溢价及冲击成本。</p>
        </div>

        <div class="section">
            <h2>大资金不友好原因</h2>
            <p>标的为高流动性 ETF，容量高；大资金尚可操作，惟需关注流动性边际影响。</p>
        </div>

        <div class="section">
            <h2>行为偏差利用原因</h2>
            <p>利用动量与趋势跟随，部分依赖投资者惯性与追涨行为。</p>
        </div>

        <div class="section">
            <h2>跨阶段稳健性原因</h2>
            <p>25 日动量在多数市场阶段有效，但在震荡/剧烈反转阶段易失效；使用安全区间略增稳健性。</p>
        </div>

        <div class="section">
            <h2>最差环境</h2>
            <p>单边快速反转市（如疫情急跌后急速反弹）, 多资产同时低波动或负动量的震荡市</p>
        </div>

        <div class="section">
            <h2>可验证预测</h2>
            <p>在出现明确上升趋势时，能较长时间持有强势ETF并获取超额收益, 在四只 ETF 动量均为负时保持空仓，优于等权持有, 动量得分过高（&gt;5）对应未来回撤概率增加</p>
        </div>

        <div class="section">
            <h2>一句话总结</h2>
            <p>简洁的单 ETF 动量轮动，实盘执行友好，但收益高度依赖短期趋势，需进一步验证。</p>
        </div>

        <div class="section">
            <h2>优化建议</h2>
            <p>1) 引入现金管理或债券ETF做空仓替代，提升资金利用率；2) 参数（动量窗口、权重衰减）可用滚动/跨期验证优化；3) 增加多因子过滤（波动率、成交量）或风险控制机制。</p>
        </div>

        <div class="section">
            <h2>假设条件</h2>
            <p>默认资金体量&lt;10亿元，足以一次性买卖 ETF 而不显著冲击市场。, 按代码设置采用 FixedSlippage(0.001) 但若实盘用市价单，滑点与申购赎回折溢价可能更大。</p>
        </div>

        <div class="section">
            <h2>评分汇总</h2>
            <table>
                <tr><th>指标</th><th>分数</th></tr>
                <tr><td>未来函数风险</td><td>2</td></tr>
                <tr><td>滑点</td><td>2</td></tr>
                <tr><td>成本</td><td>3</td></tr>
                <tr><td>执行难度</td><td>2</td></tr>
                <tr><td>时间敏感性</td><td>3</td></tr>
                <tr><td>综合可执行性</td><td>8.7</td></tr>
                <tr><td>大资金不友好</td><td>3</td></tr>
                <tr><td>行为偏差利用</td><td>5</td></tr>
                <tr><td>跨阶段稳健性</td><td>5</td></tr>
                <tr><td>有效性总分</td><td>4.3</td></tr>
                <tr><td>总分</td><td>62.5</td></tr>
            </table>
        </div>

        <div class="section">
            <h2>原始AI响应</h2>
            <pre>```json
{
    &quot;strategy_name&quot;: &quot;四支ETF安全动量单轮动&quot;,
    &quot;strategy_type&quot;: &quot;动量策略&quot;,
    
    &quot;strategy_explanation&quot;: {
        &quot;core_logic&quot;: &quot;在四只高流动性的ETF中，计算最近25个交易日的对数价格线性回归斜率（代表年化动量）并乘以加权R²作为综合得分；仅当得分为正且不高于5时认定为“安全动量”，每天 09:30 挑选得分最高的一只 ETF 满仓持有，其余全部清仓。通过在上涨早期买入强势品种、在动量转弱时空仓或切换来获取趋势收益、避免过度追高。&quot;,
        &quot;data_and_indicators&quot;: &quot;1) 日频收盘价 attribute_history(etf, 25, &#x27;1d&#x27;, [&#x27;close&#x27;])\n2) 由收盘价计算对数收益率、线性回归斜率（近似日均 log 回报）\n3) 基于 250 交易日换算的年化收益；加权决定系数 R² 用于质量调整\n数据全部来自行情价格，无财务或另类数据。&quot;,
        &quot;stock_pool&quot;: &quot;固定 ETF 池：黄金(518880)、纳指100(513100)、创业板100(159915)、上证180(510180)。无 ST/停牌等过滤（ETF 亦无 ST）。&quot;,
        &quot;buy_signals&quot;: [
            &quot;在每日 09:30 重新计算得分后，排名第一且得分介于 0~5 的 ETF&quot;,
            &quot;当前持仓数量不足 1 只&quot;
        ],
        &quot;sell_signals&quot;: [
            &quot;持仓 ETF 不再位列安全动量第一名&quot;,
            &quot;其得分跌至 ≤0 或 &gt;5（被 get_rank 过滤掉）&quot;
        ],
        &quot;position_and_risk&quot;: &quot;最多同时持有 1 只 ETF，仓位=可用资金全仓；无显式止损/止盈；当全部得分≤0 或 &gt;5 时空仓。&quot;,
        &quot;trading_frequency&quot;: &quot;理论上每日 09:30 检查并可能换仓；实际换手取决于动量排序变化，估计月均换手 1~2 次。&quot;,
        &quot;manual_execution_guide&quot;: &quot;若手动执行，可在开盘前或开盘后尽快（09:30 左右）根据前一日收盘价计算得分并下单，或于收盘后计算并次日开盘挂单。&quot;
    },
    
    &quot;future_function_detection&quot;: {
        &quot;has_future_function&quot;: &quot;否&quot;,
        &quot;risk_level&quot;: &quot;低&quot;,
        &quot;risk_score&quot;: 2,
        &quot;risk_score_reason&quot;: &quot;仅使用 attribute_history（在 09:30 调用时不包含当日盘中数据）；未见 use of history_bars with forward-shift, no scheduled functions at T&gt;0, avoid_future_data 打开。&quot;,
        &quot;detailed_analysis&quot;: {
            &quot;price_data_leak&quot;: &quot;attribute_history 默认不泄漏未来价格，调用时为前一交易日收盘价。&quot;,
            &quot;financial_data_leak&quot;: &quot;未使用财务数据，故无风险。&quot;,
            &quot;index_component_leak&quot;: &quot;ETF 名单固定，无未来成分引用。&quot;,
            &quot;backtest_engine_leak&quot;: &quot;无对 context.portfolio 的未来调用；持仓与调仓在盘中执行，但不影响未来信息。&quot;
        },
        &quot;fix_suggestions&quot;: &quot;可将调仓时间改为 14:55 并使用昨日数据，进一步消除盘中价格波动对因子计算、执行顺序的潜在影响。&quot;,
        &quot;gray_area_warnings&quot;: [
            &quot;盘中 09:30 调用 attribute_history 时可能把当日开盘价计入可交易价格，形成微弱同频干预，虽风险有限但需验证。&quot;,
            &quot;当全部 ETF 得分被过滤后系统空仓，可能导致回测时高夏普但真实资金闲置，需另设现金管理资产。&quot;,
            &quot;score 上限 5 为经验值，过度依赖历史调参，存在数据窥探（但非未来函数）风险&quot;
        ]
    },
    
    &quot;execution_difficulty&quot;: {
        &quot;slippage_score&quot;: 2,
        &quot;slippage_reason&quot;: &quot;交易标的是大盘 ETF，日均成交额数十亿以上，正常市价/限价下单滑点可忽略；策略单日成交量有限。&quot;,
        &quot;cost_score&quot;: 3,
        &quot;cost_reason&quot;: &quot;调仓频率约周—月级；基金佣金设置 2bp，每次全仓换手最大成本约0.4%；较低。&quot;,
        &quot;execution_score&quot;: 2,
        &quot;execution_reason&quot;: &quot;仅 1 只高流动性 ETF，多数券商支持大额交易，成交难度小。&quot;,
        &quot;time_sensitivity_score&quot;: 3,
        &quot;time_sensitivity_reason&quot;: &quot;日内 09:30 下单，若延后至收盘前或次日盘前影响有限，但考虑到日内波动给出中低等级。&quot;,
        &quot;overall_executability&quot;: 9,
        &quot;overall_reason&quot;: &quot;低频、高流动性、极简持仓，实盘易于执行。&quot;,
        &quot;scenario_analysis&quot;: {
            &quot;10w&quot;: &quot;完全可执行，买入1手起步。&quot;,
            &quot;100w&quot;: &quot;流动性充裕，冲击极低。&quot;,
            &quot;1000w&quot;: &quot;单笔成交占比&lt;1%日均成交量，仍可一次性成交或分笔完成。&quot;,
            &quot;1y&quot;: &quot;仍可执行，但需注意大额申赎带来的折价溢价及冲击成本。&quot;
        },
        &quot;improvement_suggestions&quot;: [
            &quot;可将调仓时间调整到收盘前，使用次日开盘价执行，降低潜在高频噪声。&quot;,
            &quot;增加止损或波动控制，如ATR或均线防抖，改善回撤表现。&quot;
        ]
    },
    
    &quot;effectiveness&quot;: {
        &quot;large_fund_unfriendly_score&quot;: 3,
        &quot;large_fund_unfriendly_reason&quot;: &quot;标的为高流动性 ETF，容量高；大资金尚可操作，惟需关注流动性边际影响。&quot;,
        &quot;behavioral_bias_score&quot;: 5,
        &quot;behavioral_bias_reason&quot;: &quot;利用动量与趋势跟随，部分依赖投资者惯性与追涨行为。&quot;,
        &quot;cross_period_robustness_score&quot;: 5,
        &quot;cross_period_robustness_reason&quot;: &quot;25 日动量在多数市场阶段有效，但在震荡/剧烈反转阶段易失效；使用安全区间略增稳健性。&quot;,
        &quot;effectiveness_total_score&quot;: 4.2,
        &quot;weight_explanation&quot;: &quot;大资金友好 40%，行为偏差 30%，跨阶段稳健 30%。&quot;,
        &quot;worst_environments&quot;: [
            &quot;单边快速反转市（如疫情急跌后急速反弹）&quot;,
            &quot;多资产同时低波动或负动量的震荡市&quot;
        ],
        &quot;verifiable_predictions&quot;: [
            &quot;在出现明确上升趋势时，能较长时间持有强势ETF并获取超额收益&quot;,
            &quot;在四只 ETF 动量均为负时保持空仓，优于等权持有&quot;,
            &quot;动量得分过高（&gt;5）对应未来回撤概率增加&quot;
        ]
    },
    
    &quot;conclusion&quot;: {
        &quot;verdict&quot;: &quot;简洁的单 ETF 动量轮动，实盘执行友好，但收益高度依赖短期趋势，需进一步验证。&quot;,
        &quot;recommendation&quot;: &quot;小仓实测&quot;,
        &quot;optimization_suggestions&quot;: &quot;1) 引入现金管理或债券ETF做空仓替代，提升资金利用率；2) 参数（动量窗口、权重衰减）可用滚动/跨期验证优化；3) 增加多因子过滤（波动率、成交量）或风险控制机制。&quot;
    },
    
    &quot;score_summary&quot;: {
        &quot;future_function_risk&quot;: 2,
        &quot;slippage&quot;: 2,
        &quot;cost&quot;: 3,
        &quot;execution&quot;: 2,
        &quot;time_sensitivity&quot;: 3,
        &quot;executability&quot;: 9,
        &quot;effectiveness_a&quot;: 3,
        &quot;effectiveness_b&quot;: 5,
        &quot;effectiveness_c&quot;: 5,
        &quot;effectiveness_total&quot;: 4.2
    },
    
    &quot;assumptions&quot;: [
        &quot;默认资金体量&lt;10亿元，足以一次性买卖 ETF 而不显著冲击市场。&quot;,
        &quot;按代码设置采用 FixedSlippage(0.001) 但若实盘用市价单，滑点与申购赎回折溢价可能更大。&quot;
    ]
}
```</pre>
        </div>

    </div>
</body>
</html>