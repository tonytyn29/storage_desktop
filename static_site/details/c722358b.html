<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>月度行业反转轮动 - 策略详情</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 30px;
            line-height: 1.8;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .meta { color: #888; margin-bottom: 30px; font-size: 0.9rem; }
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section h2 {
            font-size: 1.2rem;
            color: #00d4ff;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .section p, .section pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #ccc;
        }
        pre {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
        }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .back-btn:hover { opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { background: rgba(0,0,0,0.2); color: #00d4ff; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-btn">← 返回列表</a>
        <h1>月度行业反转轮动</h1>
        <p class="meta">
            ID: c722358b | 
            类型: 均值回归 + 简单多因子选股 | 
            来源: b2324_51.行业反转效应（年化32%回撤8%).txt |
            分析日期: 2026-01-11 18:20:31
        </p>

        <div class="section">
            <h2>策略逻辑概要</h2>
            <p>把过去 3~6 个月跑输市场的行业视为“过度悲观”，预期其在未来 1 个月出现均值回归；若该行业存在对应 ETF 就直接持有 ETF，否则在行业内挑选低 PB、ROE 较高的价值股做代表性持仓，按月轮动。</p>
        </div>

        <div class="section">
            <h2>股票池</h2>
            <p>所有 A 股；仅在选个股时剔除 PB≤0 或 ROE≤0，公司上市天数、停牌、ST、涨跌停、流动性等均未显式过滤。</p>
        </div>

        <div class="section">
            <h2>买入信号</h2>
            <p>每月第一交易日，计算过去 36 个月行业超额收益序列，对短期(3月)与中期(6月)做简单回归/比值得到反转预测值, 将综合预测值最差的 5 个行业作为未来 1 个月的“反转候选”</p>
        </div>

        <div class="section">
            <h2>卖出信号</h2>
            <p>当持仓标的不再属于当月 g.buy_dict 中任何行业/股票池，即全部卖出, 无止损/止盈、无风控阈值</p>
        </div>

        <div class="section">
            <h2>仓位管理</h2>
            <p>等权配置 5 个行业；若持 ETF 则行业权重一次性给 ETF；若持 10 只股票则行业权重在 10 只股票中再等权。没有总仓或单票上限、无风险控制。</p>
        </div>

        <div class="section">
            <h2>交易频率</h2>
            <p>完全月频。回调函数 run_monthly 于每月 1 号开盘后依次执行行业选择、标的选择、trade 下单。</p>
        </div>

        <div class="section">
            <h2>手动执行指南</h2>
            <p>若手动操作，可在每月首个交易日开盘前计算并列出应买入的 5 个行业及其 ETF/股票清单，开盘后用等权市值委托即可；盘中无需干预，持有 1 个月后再调仓。</p>
        </div>

        <div class="section">
            <h2>代码审计详情</h2>
            <p>returns_calculation 与 ETF_selection 均调用 get_industry_stocks(code)（34, 126 行左右）未传入 date 参数，JoinQuant 将返回‘当前’成份股，由此在回测时使用到了未来尚未上市或未来才调入行业的股票，属于典型未来函数。</p>
        </div>

        <div class="section">
            <h2>灰色区域警告</h2>
            <p>行业指数用“股票收盘价求和”近似，忽视权重及停牌问题, 财报 PB/ROE T-1 滞后假设未显式写出，严谨性不足, 未考虑涨跌停、停牌导致的调仓无法成交风险</p>
        </div>

        <div class="section">
            <h2>执行分析</h2>
            <p>月频 + ETF，10~1000 万资金较易执行，&gt;1 亿需要关注小盘股冲击。</p>
        </div>

        <div class="section">
            <h2>10万资金场景</h2>
            <p>几乎无冲击，可全额成交。</p>
        </div>

        <div class="section">
            <h2>100万资金场景</h2>
            <p>仍属轻量，ETF+50只股票逐笔吃单即可。</p>
        </div>

        <div class="section">
            <h2>1000万资金场景</h2>
            <p>ETF 部分毫无压力，但股票端需拆单，可能对极小市值股造成冲击。</p>
        </div>

        <div class="section">
            <h2>1亿资金场景</h2>
            <p>股票端容量受限，需仅使用 ETF 或缩减股票池。</p>
        </div>

        <div class="section">
            <h2>大资金不友好原因</h2>
            <p>约一半仓位或更多落在个股，且挑选低估值小市值概率较高，对大资金不友好。</p>
        </div>

        <div class="section">
            <h2>行为偏差利用原因</h2>
            <p>策略利用了行业层面的均值回归/情绪修复，但模型简单，行为偏差利用有限。</p>
        </div>

        <div class="section">
            <h2>跨阶段稳健性原因</h2>
            <p>仅 3~6 月窗口 + 36 月滚动，参数少但预测公式随意(y/previous)，对市场环境较敏感；历史适用性存疑。</p>
        </div>

        <div class="section">
            <h2>最差环境</h2>
            <p>长时间单边上涨（反转策略持续做空强势行业）, 行业结构性退市或指数调整频繁导致行业指数失真</p>
        </div>

        <div class="section">
            <h2>可验证预测</h2>
            <p>被选中的 5 个行业在下月超额收益显著正于基准, 预测值越低的行业，下月收益越高（单调性检验）, 行业层面收益出现 3~6 个月高负相关</p>
        </div>

        <div class="section">
            <h2>一句话总结</h2>
            <p>核心思路简单直观，但当前实现存在严重未来函数风险，回测结果不可参考。</p>
        </div>

        <div class="section">
            <h2>优化建议</h2>
            <p>1) 用申万一级行业官方指数替代自制加总，天然规避未来成份；2) 引入成交量、流动性等过滤防踩雷；3) 采用更严谨的反转度量（如过去收益 * ‑1 或偏度等）</p>
        </div>

        <div class="section">
            <h2>假设条件</h2>
            <p>假设所有财务数据使用最新已披露值（T-1 无穿越）, 默认滑点 1‰、佣金 0.03% 与聚宽设置一致，未考虑印花税、融资融券</p>
        </div>

        <div class="section">
            <h2>评分汇总</h2>
            <table>
                <tr><th>指标</th><th>分数</th></tr>
                <tr><td>未来函数风险</td><td>8</td></tr>
                <tr><td>滑点</td><td>3</td></tr>
                <tr><td>成本</td><td>3</td></tr>
                <tr><td>执行难度</td><td>6</td></tr>
                <tr><td>时间敏感性</td><td>2</td></tr>
                <tr><td>综合可执行性</td><td>7.3</td></tr>
                <tr><td>大资金不友好</td><td>6</td></tr>
                <tr><td>行为偏差利用</td><td>5</td></tr>
                <tr><td>跨阶段稳健性</td><td>4</td></tr>
                <tr><td>有效性总分</td><td>4.9</td></tr>
                <tr><td>总分</td><td>59.9</td></tr>
            </table>
        </div>

        <div class="section">
            <h2>原始AI响应</h2>
            <pre>```json
{
    &quot;strategy_name&quot;: &quot;月度行业反转轮动&quot;,
    &quot;strategy_type&quot;: &quot;均值回归 + 简单多因子选股&quot;,
    
    &quot;strategy_explanation&quot;: {
        &quot;core_logic&quot;: &quot;把过去 3~6 个月跑输市场的行业视为“过度悲观”，预期其在未来 1 个月出现均值回归；若该行业存在对应 ETF 就直接持有 ETF，否则在行业内挑选低 PB、ROE 较高的价值股做代表性持仓，按月轮动。&quot;,
        &quot;data_and_indicators&quot;: &quot;1) 日线收盘价（用于计算 SW-L1 行业指数收益，月度更新）；2) PB、ROE（财报披露节奏约季报，实盘中为 T-1 可得）；3) 无量价、情绪等其它因子。&quot;,
        &quot;stock_pool&quot;: &quot;所有 A 股；仅在选个股时剔除 PB≤0 或 ROE≤0，公司上市天数、停牌、ST、涨跌停、流动性等均未显式过滤。&quot;,
        &quot;buy_signals&quot;: [&quot;每月第一交易日，计算过去 36 个月行业超额收益序列，对短期(3月)与中期(6月)做简单回归/比值得到反转预测值&quot;, &quot;将综合预测值最差的 5 个行业作为未来 1 个月的“反转候选”&quot;],
        &quot;sell_signals&quot;: [&quot;当持仓标的不再属于当月 g.buy_dict 中任何行业/股票池，即全部卖出&quot;, &quot;无止损/止盈、无风控阈值&quot;],
        &quot;position_and_risk&quot;: &quot;等权配置 5 个行业；若持 ETF 则行业权重一次性给 ETF；若持 10 只股票则行业权重在 10 只股票中再等权。没有总仓或单票上限、无风险控制。&quot;,
        &quot;trading_frequency&quot;: &quot;完全月频。回调函数 run_monthly 于每月 1 号开盘后依次执行行业选择、标的选择、trade 下单。&quot;,
        &quot;manual_execution_guide&quot;: &quot;若手动操作，可在每月首个交易日开盘前计算并列出应买入的 5 个行业及其 ETF/股票清单，开盘后用等权市值委托即可；盘中无需干预，持有 1 个月后再调仓。&quot;
    },
    
    &quot;future_function_detection&quot;: {
        &quot;has_future_function&quot;: &quot;是&quot;,
        &quot;risk_level&quot;: &quot;高&quot;,
        &quot;risk_score&quot;: 8,
        &quot;risk_score_reason&quot;: &quot;returns_calculation 与 ETF_selection 均调用 get_industry_stocks(code)（34, 126 行左右）未传入 date 参数，JoinQuant 将返回‘当前’成份股，由此在回测时使用到了未来尚未上市或未来才调入行业的股票，属于典型未来函数。&quot;,
        &quot;detailed_analysis&quot;: {
            &quot;price_data_leak&quot;: &quot;价格本身未越界，但对错误的未来成份进行聚合，隐含未来信息。&quot;,
            &quot;financial_data_leak&quot;: &quot;调用 get_fundamentals 时未限定数据日期，但在回测框架 avoid_future_data=True 的约束下，财报本身不会泄漏；问题主要在行业成份。&quot;,
            &quot;index_component_leak&quot;: &quot;行业成份使用未来信息（get_industry_stocks，无 date）。&quot;,
            &quot;backtest_engine_leak&quot;: &quot;无额外发现。&quot;
        },
        &quot;fix_suggestions&quot;: &quot;所有 get_industry_stocks(...)、get_industries(...) 必须带 date=context.previous_date，或先构造历史行业指数(申万官网有月度权重)，避免未来成份穿越。&quot;,
        &quot;gray_area_warnings&quot;: [&quot;行业指数用“股票收盘价求和”近似，忽视权重及停牌问题&quot;, &quot;财报 PB/ROE T-1 滞后假设未显式写出，严谨性不足&quot;, &quot;未考虑涨跌停、停牌导致的调仓无法成交风险&quot;]
    },
    
    &quot;execution_difficulty&quot;: {
        &quot;slippage_score&quot;: 3,
        &quot;slippage_reason&quot;: &quot;月度调仓且以 ETF 为主（大部分对ETF直接建仓），正常撮合滑点低。&quot;,
        &quot;cost_score&quot;: 3,
        &quot;cost_reason&quot;: &quot;换手频率=月，更换 5 个行业≈25 只 ETF/股票，佣金税负中等。&quot;,
        &quot;execution_score&quot;: 6,
        &quot;execution_reason&quot;: &quot;若选股落到小市值低 PB 股，量化下单需要拆单；ETF 流动性很好。整体容量中等。&quot;,
        &quot;time_sensitivity_score&quot;: 2,
        &quot;time_sensitivity_reason&quot;: &quot;开盘后整天均可完成调仓，对时点不敏感。&quot;,
        &quot;overall_executability&quot;: 7,
        &quot;overall_reason&quot;: &quot;月频 + ETF，10~1000 万资金较易执行，&gt;1 亿需要关注小盘股冲击。&quot;,
        &quot;scenario_analysis&quot;: {
            &quot;10w&quot;: &quot;几乎无冲击，可全额成交。&quot;,
            &quot;100w&quot;: &quot;仍属轻量，ETF+50只股票逐笔吃单即可。&quot;,
            &quot;1000w&quot;: &quot;ETF 部分毫无压力，但股票端需拆单，可能对极小市值股造成冲击。&quot;,
            &quot;1y&quot;: &quot;股票端容量受限，需仅使用 ETF 或缩减股票池。&quot;
        },
        &quot;improvement_suggestions&quot;: [&quot;对无 ETF 的行业改用行业指数期货或放弃股票挑选，提升容量&quot;, &quot;加入成交量、停牌、ST 过滤并设置单票最大持仓比例&quot;]
    },
    
    &quot;effectiveness&quot;: {
        &quot;large_fund_unfriendly_score&quot;: 6,
        &quot;large_fund_unfriendly_reason&quot;: &quot;约一半仓位或更多落在个股，且挑选低估值小市值概率较高，对大资金不友好。&quot;,
        &quot;behavioral_bias_score&quot;: 5,
        &quot;behavioral_bias_reason&quot;: &quot;策略利用了行业层面的均值回归/情绪修复，但模型简单，行为偏差利用有限。&quot;,
        &quot;cross_period_robustness_score&quot;: 4,
        &quot;cross_period_robustness_reason&quot;: &quot;仅 3~6 月窗口 + 36 月滚动，参数少但预测公式随意(y/previous)，对市场环境较敏感；历史适用性存疑。&quot;,
        &quot;effectiveness_total_score&quot;: 4.9,
        &quot;weight_explanation&quot;: &quot;大资金不友好 40% + 行为偏差 30% + 跨阶段稳健 30%&quot;,
        &quot;worst_environments&quot;: [&quot;长时间单边上涨（反转策略持续做空强势行业）&quot;, &quot;行业结构性退市或指数调整频繁导致行业指数失真&quot;],
        &quot;verifiable_predictions&quot;: [&quot;被选中的 5 个行业在下月超额收益显著正于基准&quot;, &quot;预测值越低的行业，下月收益越高（单调性检验）&quot;, &quot;行业层面收益出现 3~6 个月高负相关&quot;]
    },
    
    &quot;conclusion&quot;: {
        &quot;verdict&quot;: &quot;核心思路简单直观，但当前实现存在严重未来函数风险，回测结果不可参考。&quot;,
        &quot;recommendation&quot;: &quot;小仓实测前必须先消除未来函数并重跑回测；若历史 IR 仍可接受可继续研究。&quot;,
        &quot;optimization_suggestions&quot;: &quot;1) 用申万一级行业官方指数替代自制加总，天然规避未来成份；2) 引入成交量、流动性等过滤防踩雷；3) 采用更严谨的反转度量（如过去收益 * ‑1 或偏度等）&quot;
    },
    
    &quot;score_summary&quot;: {
        &quot;future_function_risk&quot;: 8,
        &quot;slippage&quot;: 3,
        &quot;cost&quot;: 3,
        &quot;execution&quot;: 6,
        &quot;time_sensitivity&quot;: 2,
        &quot;executability&quot;: 7,
        &quot;effectiveness_a&quot;: 6,
        &quot;effectiveness_b&quot;: 5,
        &quot;effectiveness_c&quot;: 4,
        &quot;effectiveness_total&quot;: 4.9
    },
    
    &quot;assumptions&quot;: [&quot;假设所有财务数据使用最新已披露值（T-1 无穿越）&quot;, &quot;默认滑点 1‰、佣金 0.03% 与聚宽设置一致，未考虑印花税、融资融券&quot;]
}
```</pre>
        </div>

    </div>
</body>
</html>