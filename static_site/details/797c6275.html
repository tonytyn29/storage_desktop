<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>偏股基金规模反向轮动 - 策略详情</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 30px;
            line-height: 1.8;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .meta { color: #888; margin-bottom: 30px; font-size: 0.9rem; }
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section h2 {
            font-size: 1.2rem;
            color: #00d4ff;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .section p, .section pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #ccc;
        }
        pre {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
        }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .back-btn:hover { opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { background: rgba(0,0,0,0.2); color: #00d4ff; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-btn">← 返回列表</a>
        <h1>偏股基金规模反向轮动</h1>
        <p class="meta">
            ID: 797c6275 | 
            类型: 其他（公募基金量化轮动） | 
            来源: b2324_84.多大规模的基金收益最好？偏股基金规模研究.txt |
            分析日期: 2026-01-11 18:30:46
        </p>

        <div class="section">
            <h2>策略逻辑概要</h2>
            <p>每年 4 月根据最新可得季报，先筛掉股票资产规模低于 1.5 亿元的偏股型公募基金，再在剩余基金中按股票资产规模从小到大排序，买入规模最小的 10 只并等权持有。假设“小而美”基金更灵活、收益更高，通过每年一次的调仓捕捉其超额收益。</p>
        </div>

        <div class="section">
            <h2>股票池</h2>
            <p>并非股票池，而是基金池：
• 类型：开放式或 LOF（operate_mode_id 401001 / 401006），股基或偏股混合（underlying_asset_type 402001 / 402004，invest_style 005001 / 005005）
• 成立满 1 年、未退市
• 上一季报股票占比 ≥70%
• 股票资产规模 &gt;1.5 亿
去除了因 finance 接口异常而无法获取信息的基金。</p>
        </div>

        <div class="section">
            <h2>买入信号</h2>
            <p>每年 4 月首次运行或上一调仓月为非当前月时，再次运行 check_out() 选出规模最小的 10 只基金, 目标权重＝1/10，每只基金现有市值低于目标市值 10% 以上时通过 purchase() 补足</p>
        </div>

        <div class="section">
            <h2>卖出信号</h2>
            <p>基金不再位于目标池时，全部赎回, 持仓市值高于目标市值 10% 以上时，赎回超额部分</p>
        </div>

        <div class="section">
            <h2>仓位管理</h2>
            <p>单票权重＝10%；最大持仓 10 只；其余资金留现金。未设置止损/止盈及大盘风控。基金 T+3 到账通过多次 trade() 调度解决，仓位偏离＞1% 时自动补仓。</p>
        </div>

        <div class="section">
            <h2>交易频率</h2>
            <p>核心调仓：每年 4 月一次（check_out 在 run_monthly -1 触发）。
执行：同月 open 时段多次调用 trade()（-1,4,6,8 offset）确保赎回/申购完成。</p>
        </div>

        <div class="section">
            <h2>手动执行指南</h2>
            <p>如需人工执行，可在每年 4 月季报数据完整后（建议 5 月初）盘后按照选出的 10 只基金等权申购；确认份额到账后赎回非目标基金并按月检查规模变化。</p>
        </div>

        <div class="section">
            <h2>代码审计详情</h2>
            <p>虽然 set_option(&quot;avoid_future_data&quot;, True) 已开启，但代码直接以上一季度 period_end 作为过滤条件，未显式使用公告日期字段，理论上在真实历史回测中可能提前获取尚未披露的季报数据。</p>
        </div>

        <div class="section">
            <h2>灰色区域警告</h2>
            <p>季报发布时间差通常 30~60 天，4 月初调用 3 月 31 日数据可能越界, 公募基金规模越小，申购/赎回对净值冲击越大，实盘可能推高管理费比例, T+3 资金占用与多次 trade() 调度逻辑需与券商资金实际流转对齐</p>
        </div>

        <div class="section">
            <h2>执行分析</h2>
            <p>低频、基金品种，个人/小机构资金操作较易，但大资金（&gt;5000 万）需要拆分通道并关注基金公司限额</p>
        </div>

        <div class="section">
            <h2>10万资金场景</h2>
            <p>完全可行，对基金无冲击</p>
        </div>

        <div class="section">
            <h2>100万资金场景</h2>
            <p>基本可行，部分基金仍在可接受规模</p>
        </div>

        <div class="section">
            <h2>1000万资金场景</h2>
            <p>需分批申购或挑选规模稍大的基金，否则可能被“限购”</p>
        </div>

        <div class="section">
            <h2>1亿资金场景</h2>
            <p>（1 亿）多数目标基金可能直接限制 100 万~500 万单日申购，需要同时持有更多只基金或放宽规模筛选</p>
        </div>

        <div class="section">
            <h2>大资金不友好原因</h2>
            <p>策略核心是买“小规模”基金，本身容量有限；大额申购易被基金公司限购或稀释 alpha</p>
        </div>

        <div class="section">
            <h2>行为偏差利用原因</h2>
            <p>假设规模小的基金经理更积极、风格灵活，属于轻微行为与激励假设，但未直接捕捉情绪因子</p>
        </div>

        <div class="section">
            <h2>跨阶段稳健性原因</h2>
            <p>仅一年一调、逻辑简单，但对 A 股牛熊转换及基金发行节奏敏感；不同年份基金规模分布与政策差异影响大</p>
        </div>

        <div class="section">
            <h2>最差环境</h2>
            <p>公募基金集中限购、暂停申购的年份, 股市极端下跌导致小规模基金大幅赎回、流动性风险上升</p>
        </div>

        <div class="section">
            <h2>可验证预测</h2>
            <p>小规模偏股基金未来 12 个月收益率显著高于同类型大规模基金, 在牛市初期该策略 Alpha 最大，熊市中收益趋同, 基金规模与未来超额收益呈负相关</p>
        </div>

        <div class="section">
            <h2>一句话总结</h2>
            <p>逻辑直观、交易低频，作为观察基金规模与收益关系的实证策略有参考价值，但存在季报未来数据疑虑与大资金执行瓶颈。</p>
        </div>

        <div class="section">
            <h2>优化建议</h2>
            <p>1) 使用公告日过滤彻底消除未来数据；2) 增加流动性/限购检测及最小可申购额度限制；3) 结合基金经理业绩、换手率等多维度因子做二次排序提升稳健性</p>
        </div>

        <div class="section">
            <h2>假设条件</h2>
            <p>未给定回测资金规模，假设初始资金 100 万元, 未设置真实申购/赎回费率或滑点，默认聚宽引擎费率模型；若实盘需按各基金最新费率重新估算</p>
        </div>

        <div class="section">
            <h2>评分汇总</h2>
            <table>
                <tr><th>指标</th><th>分数</th></tr>
                <tr><td>未来函数风险</td><td>4</td></tr>
                <tr><td>滑点</td><td>2</td></tr>
                <tr><td>成本</td><td>2</td></tr>
                <tr><td>执行难度</td><td>6</td></tr>
                <tr><td>时间敏感性</td><td>3</td></tr>
                <tr><td>综合可执行性</td><td>7.8</td></tr>
                <tr><td>大资金不友好</td><td>8</td></tr>
                <tr><td>行为偏差利用</td><td>4</td></tr>
                <tr><td>跨阶段稳健性</td><td>5</td></tr>
                <tr><td>有效性总分</td><td>5.9</td></tr>
                <tr><td>总分</td><td>67.7</td></tr>
            </table>
        </div>

        <div class="section">
            <h2>原始AI响应</h2>
            <pre>```json
{
    &quot;strategy_name&quot;: &quot;偏股基金规模反向轮动&quot;,
    &quot;strategy_type&quot;: &quot;其他（公募基金量化轮动）&quot;,
    
    &quot;strategy_explanation&quot;: {
        &quot;core_logic&quot;: &quot;每年 4 月根据最新可得季报，先筛掉股票资产规模低于 1.5 亿元的偏股型公募基金，再在剩余基金中按股票资产规模从小到大排序，买入规模最小的 10 只并等权持有。假设“小而美”基金更灵活、收益更高，通过每年一次的调仓捕捉其超额收益。&quot;,
        &quot;data_and_indicators&quot;: &quot;1) finance.FUND_MAIN_INFO 基本信息（基金类别、成立日、是否退市）\n2) finance.FUND_PORTFOLIO 季报披露的 stock_value 与 stock_rate（股票市值、股票占比）\n3) 基金净值和申购/赎回接口 purchase(), redeem() 用于实际交易\n数据更新频率：季报（每季度），净值（日终）。&quot;,
        &quot;stock_pool&quot;: &quot;并非股票池，而是基金池：\n• 类型：开放式或 LOF（operate_mode_id 401001 / 401006），股基或偏股混合（underlying_asset_type 402001 / 402004，invest_style 005001 / 005005）\n• 成立满 1 年、未退市\n• 上一季报股票占比 ≥70%\n• 股票资产规模 &gt;1.5 亿\n去除了因 finance 接口异常而无法获取信息的基金。&quot;,
        &quot;buy_signals&quot;: [&quot;每年 4 月首次运行或上一调仓月为非当前月时，再次运行 check_out() 选出规模最小的 10 只基金&quot;, &quot;目标权重＝1/10，每只基金现有市值低于目标市值 10% 以上时通过 purchase() 补足&quot;],
        &quot;sell_signals&quot;: [&quot;基金不再位于目标池时，全部赎回&quot;, &quot;持仓市值高于目标市值 10% 以上时，赎回超额部分&quot;],
        &quot;position_and_risk&quot;: &quot;单票权重＝10%；最大持仓 10 只；其余资金留现金。未设置止损/止盈及大盘风控。基金 T+3 到账通过多次 trade() 调度解决，仓位偏离＞1% 时自动补仓。&quot;,
        &quot;trading_frequency&quot;: &quot;核心调仓：每年 4 月一次（check_out 在 run_monthly -1 触发）。\n执行：同月 open 时段多次调用 trade()（-1,4,6,8 offset）确保赎回/申购完成。&quot;,
        &quot;manual_execution_guide&quot;: &quot;如需人工执行，可在每年 4 月季报数据完整后（建议 5 月初）盘后按照选出的 10 只基金等权申购；确认份额到账后赎回非目标基金并按月检查规模变化。&quot;
    },
    
    &quot;future_function_detection&quot;: {
        &quot;has_future_function&quot;: &quot;不确定&quot;,
        &quot;risk_level&quot;: &quot;中&quot;,
        &quot;risk_score&quot;: 4,
        &quot;risk_score_reason&quot;: &quot;虽然 set_option(\&quot;avoid_future_data\&quot;, True) 已开启，但代码直接以上一季度 period_end 作为过滤条件，未显式使用公告日期字段，理论上在真实历史回测中可能提前获取尚未披露的季报数据。&quot;,
        &quot;detailed_analysis&quot;: {
            &quot;price_data_leak&quot;: &quot;未使用未来价格，基金净值 purchase()/redeem() 由回测引擎处理，风险低&quot;,
            &quot;financial_data_leak&quot;: &quot;get_fund_code() 与 get_stock_asset() 直接查询 finance.FUND_PORTFOLIO where period_end = report_date；若引擎未限制 ann_date，可能提前看到季报持仓 → 中度风险&quot;,
            &quot;index_component_leak&quot;: &quot;未涉及指数成分或未来排名&quot;,
            &quot;backtest_engine_leak&quot;: &quot;多次 run_monthly 同一天重复交易不会导致未来函数，但可能与 T+3 对账存在不一致，属逻辑问题非未来函数&quot;
        },
        &quot;fix_suggestions&quot;: &quot;在 finance.run_query 里增加公告日过滤，例如 finance.FUND_PORTFOLIO.announcement_date &lt;= tradeDate，或直接使用 API get_fund_holdings(algo) 带 future_safe 参数。&quot;,
        &quot;gray_area_warnings&quot;: [&quot;季报发布时间差通常 30~60 天，4 月初调用 3 月 31 日数据可能越界&quot;, &quot;公募基金规模越小，申购/赎回对净值冲击越大，实盘可能推高管理费比例&quot;, &quot;T+3 资金占用与多次 trade() 调度逻辑需与券商资金实际流转对齐&quot;]
    },
    
    &quot;execution_difficulty&quot;: {
        &quot;slippage_score&quot;: 2,
        &quot;slippage_reason&quot;: &quot;基金以当日收盘后未知的单位净值成交，无盘口冲击与滑点概念&quot;,
        &quot;cost_score&quot;: 2,
        &quot;cost_reason&quot;: &quot;一年换手一次，且大部分股票类基金申购赎回费率在 0~1.5%，可通过资金量级谈判或前端费率优惠进一步降低&quot;,
        &quot;execution_score&quot;: 6,
        &quot;execution_reason&quot;: &quot;策略偏好规模仅略大于 1.5 亿的小基金。若一次申购金额过大，触及单日 200 万申购上限或遭基金公司暂停大额申购，需拆分或换基&quot;,
        &quot;time_sensitivity_score&quot;: 3,
        &quot;time_sensitivity_reason&quot;: &quot;只要在季度数据完全披露后的一两天内执行即可，不需分钟级响应&quot;,
        &quot;overall_executability&quot;: 7,
        &quot;overall_reason&quot;: &quot;低频、基金品种，个人/小机构资金操作较易，但大资金（&gt;5000 万）需要拆分通道并关注基金公司限额&quot;,
        &quot;scenario_analysis&quot;: {
            &quot;10w&quot;: &quot;完全可行，对基金无冲击&quot;,
            &quot;100w&quot;: &quot;基本可行，部分基金仍在可接受规模&quot;,
            &quot;1000w&quot;: &quot;需分批申购或挑选规模稍大的基金，否则可能被“限购”&quot;,
            &quot;1y&quot;: &quot;（1 亿）多数目标基金可能直接限制 100 万~500 万单日申购，需要同时持有更多只基金或放宽规模筛选&quot;
        },
        &quot;improvement_suggestions&quot;: [&quot;在选基时加入“近 30 日单日最大申购限额”过滤&quot;, &quot;把 min_asset 由 1.5 亿提高到 10 亿，可显著提高大资金执行力&quot;]
    },
    
    &quot;effectiveness&quot;: {
        &quot;large_fund_unfriendly_score&quot;: 8,
        &quot;large_fund_unfriendly_reason&quot;: &quot;策略核心是买“小规模”基金，本身容量有限；大额申购易被基金公司限购或稀释 alpha&quot;,
        &quot;behavioral_bias_score&quot;: 4,
        &quot;behavioral_bias_reason&quot;: &quot;假设规模小的基金经理更积极、风格灵活，属于轻微行为与激励假设，但未直接捕捉情绪因子&quot;,
        &quot;cross_period_robustness_score&quot;: 5,
        &quot;cross_period_robustness_reason&quot;: &quot;仅一年一调、逻辑简单，但对 A 股牛熊转换及基金发行节奏敏感；不同年份基金规模分布与政策差异影响大&quot;,
        &quot;effectiveness_total_score&quot;: 5.5,
        &quot;weight_explanation&quot;: &quot;大资金不友好 40% + 行为假设 30% + 跨阶段稳健 30%&quot;,
        &quot;worst_environments&quot;: [&quot;公募基金集中限购、暂停申购的年份&quot;, &quot;股市极端下跌导致小规模基金大幅赎回、流动性风险上升&quot;],
        &quot;verifiable_predictions&quot;: [&quot;小规模偏股基金未来 12 个月收益率显著高于同类型大规模基金&quot;, &quot;在牛市初期该策略 Alpha 最大，熊市中收益趋同&quot;, &quot;基金规模与未来超额收益呈负相关&quot;]
    },
    
    &quot;conclusion&quot;: {
        &quot;verdict&quot;: &quot;逻辑直观、交易低频，作为观察基金规模与收益关系的实证策略有参考价值，但存在季报未来数据疑虑与大资金执行瓶颈。&quot;,
        &quot;recommendation&quot;: &quot;小仓实测&quot;,
        &quot;optimization_suggestions&quot;: &quot;1) 使用公告日过滤彻底消除未来数据；2) 增加流动性/限购检测及最小可申购额度限制；3) 结合基金经理业绩、换手率等多维度因子做二次排序提升稳健性&quot;
    },
    
    &quot;score_summary&quot;: {
        &quot;future_function_risk&quot;: 4,
        &quot;slippage&quot;: 2,
        &quot;cost&quot;: 2,
        &quot;execution&quot;: 6,
        &quot;time_sensitivity&quot;: 3,
        &quot;executability&quot;: 7,
        &quot;effectiveness_a&quot;: 8,
        &quot;effectiveness_b&quot;: 4,
        &quot;effectiveness_c&quot;: 5,
        &quot;effectiveness_total&quot;: 5.5
    },
    
    &quot;assumptions&quot;: [&quot;未给定回测资金规模，假设初始资金 100 万元&quot;, &quot;未设置真实申购/赎回费率或滑点，默认聚宽引擎费率模型；若实盘需按各基金最新费率重新估算&quot;]
}
```</pre>
        </div>

    </div>
</body>
</html>