<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>周调BiLSTM‐ETF量化轮动 - 策略详情</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 30px;
            line-height: 1.8;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 {
            font-size: 2rem;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .meta { color: #888; margin-bottom: 30px; font-size: 0.9rem; }
        .section {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section h2 {
            font-size: 1.2rem;
            color: #00d4ff;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .section p, .section pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #ccc;
        }
        pre {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.85rem;
        }
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(90deg, #00d4ff, #7b2ff7);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .back-btn:hover { opacity: 0.9; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        th { background: rgba(0,0,0,0.2); color: #00d4ff; }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-btn">← 返回列表</a>
        <h1>周调BiLSTM‐ETF量化轮动</h1>
        <p class="meta">
            ID: dd3a6985 | 
            类型: 动量策略 | 
            来源: b25_61BiLSTM for ETF.txt |
            分析日期: 2026-01-10 22:40:56
        </p>

        <div class="section">
            <h2>策略逻辑概要</h2>
            <p>对全部上市满 3 年且日成交量充足的 ETF 取过去 60 个交易日的 OHLCV 数据，经 MinMax 归一化后输入离线训练好的 BiLSTM 神经网络；模型输出一个预期收益得分，取得分最高的 3 只 ETF 每周一 9:30 等权/等现金买入或继续持有，其余卖出，期望捕捉短中期上涨动量。</p>
        </div>

        <div class="section">
            <h2>股票池</h2>
            <p>• 标的: 全市场 ETF（get_all_securities(&#x27;etf&#x27;)）；• 过滤上市不足约 3 年的 ETF；• 过滤过去 60 日任一天成交量＜1,000 万份或出现 NaN 的 ETF；• 未过滤 ST/停牌，因为 ETF 不存在此问题；• 未限制涨跌停/交易状态，由聚宽撮合自动处理。</p>
        </div>

        <div class="section">
            <h2>买入信号</h2>
            <p>BiLSTM 得分排名前 3 的 ETF, 账户当前未持有该 ETF</p>
        </div>

        <div class="section">
            <h2>卖出信号</h2>
            <p>周一重新计算排名后不在前 3 的 ETF, （强制平仓）ETF 退市 / 长期停牌由 order 失败机制自然退出</p>
        </div>

        <div class="section">
            <h2>仓位管理</h2>
            <p>目标持仓数固定 3 只。实际仓位=全部可用现金；新开仓按剩余现金 /（目标数 – 现有持仓数）下单；对已有持仓不再均衡。无止损、无仓位上限、无风险控制。</p>
        </div>

        <div class="section">
            <h2>交易频率</h2>
            <p>每周一次（run_weekly），具体在每周一 9:30 盘中提交市价单（order_target_value）。</p>
        </div>

        <div class="section">
            <h2>手动执行指南</h2>
            <p>若人工执行，可在每周一开盘前运行脚本获取 Top3 ETF 名单；9:30 左右按等资金买入/卖出即可。其余时间无需操作。</p>
        </div>

        <div class="section">
            <h2>代码审计详情</h2>
            <p>所有核心数据通过 attribute_history、get_all_securities 等回测安全函数获取，且显式使用 context.previous_date 限定日期，set_option(&#x27;avoid_future_data&#x27;,True) 已开启。</p>
        </div>

        <div class="section">
            <h2>灰色区域警告</h2>
            <p>外部加载的 .pt 模型文件若使用未来数据训练，无法通过代码审计发现, set_slippage(0) 仅回测可行，实盘需设置合理滑点模型, 大量 ETF 上市不足 3 年被排除，可能导致未来 3 年时该条件意外改变带来样本不一致</p>
        </div>

        <div class="section">
            <h2>执行分析</h2>
            <p>低换手+高流动性品种+周调仓，资金容量高，执行简单。</p>
        </div>

        <div class="section">
            <h2>10万资金场景</h2>
            <p>几乎无滑点，全部成交一次即可</p>
        </div>

        <div class="section">
            <h2>100万资金场景</h2>
            <p>同上，ETF 成交量足够</p>
        </div>

        <div class="section">
            <h2>1000万资金场景</h2>
            <p>需注意极小众 ETF 的深度；可以分批成交，但仍可执行</p>
        </div>

        <div class="section">
            <h2>1亿资金场景</h2>
            <p>若持仓集中于宽基 ETF 影响很小；若不慎挑到小众 ETF，需预估日成交额&gt;10 倍单次交易额</p>
        </div>

        <div class="section">
            <h2>大资金不友好原因</h2>
            <p>ETF 容量大，策略只持 3 只，容量不成问题，打 4 分</p>
        </div>

        <div class="section">
            <h2>行为偏差利用原因</h2>
            <p>BiLSTM 模型隐式捕捉动量/情绪，存在一定行为偏差利用，但不显著</p>
        </div>

        <div class="section">
            <h2>跨阶段稳健性原因</h2>
            <p>模型需再训练；若环境变化或新 ETF 上市，稳定性未知，给 5 分</p>
        </div>

        <div class="section">
            <h2>最差环境</h2>
            <p>单边下跌的熊市（ETF 普遍同步下跌）, 训练-交易环境结构突变（如监管大幅调整、样本外失效）</p>
        </div>

        <div class="section">
            <h2>可验证预测</h2>
            <p>Top3 得分 ETF 未来一周平均收益率高于 ETF 全体均值, 选中 ETF 与市场基准 000985.XSHG 的超额收益为正, 持仓集中度（单只权重）随时间拉大，收益波动会随之上升</p>
        </div>

        <div class="section">
            <h2>一句话总结</h2>
            <p>简洁的周频 ETF 轮动策略，执行容易但长期有效性依赖黑箱 BiLSTM 模型，可作为小到中等规模资金的探索。</p>
        </div>

        <div class="section">
            <h2>优化建议</h2>
            <p>1) 加入风险控制与再均衡；2) 引入流动性/费率约束；3) 定期重训并采用滑窗训练以提高稳健性</p>
        </div>

        <div class="section">
            <h2>假设条件</h2>
            <p>未提供资金规模，假设从 10 万到 1 亿元评估, 回测/实盘均使用市场价成交；费率采用代码默认设置；未考虑实际滑点</p>
        </div>

        <div class="section">
            <h2>评分汇总</h2>
            <table>
                <tr><th>指标</th><th>分数</th></tr>
                <tr><td>未来函数风险</td><td>2</td></tr>
                <tr><td>滑点</td><td>3</td></tr>
                <tr><td>成本</td><td>3</td></tr>
                <tr><td>执行难度</td><td>8</td></tr>
                <tr><td>时间敏感性</td><td>4</td></tr>
                <tr><td>综合可执行性</td><td>6.6</td></tr>
                <tr><td>大资金不友好</td><td>4</td></tr>
                <tr><td>行为偏差利用</td><td>5</td></tr>
                <tr><td>跨阶段稳健性</td><td>5</td></tr>
                <tr><td>有效性总分</td><td>4.6</td></tr>
                <tr><td>总分</td><td>55.0</td></tr>
            </table>
        </div>

        <div class="section">
            <h2>原始AI响应</h2>
            <pre>```json
{
    &quot;strategy_name&quot;: &quot;周调BiLSTM‐ETF量化轮动&quot;,
    &quot;strategy_type&quot;: &quot;动量策略&quot;,
    
    &quot;strategy_explanation&quot;: {
        &quot;core_logic&quot;: &quot;对全部上市满 3 年且日成交量充足的 ETF 取过去 60 个交易日的 OHLCV 数据，经 MinMax 归一化后输入离线训练好的 BiLSTM 神经网络；模型输出一个预期收益得分，取得分最高的 3 只 ETF 每周一 9:30 等权/等现金买入或继续持有，其余卖出，期望捕捉短中期上涨动量。&quot;,
        &quot;data_and_indicators&quot;: &quot;1) OHLCV 日线 60 根；2) get_all_securities 提供的 ETF 基本信息。除价格数据外并未使用财务/因子数据。全部数据频率为日度。&quot;,
        &quot;stock_pool&quot;: &quot;• 标的: 全市场 ETF（get_all_securities(&#x27;etf&#x27;)）；• 过滤上市不足约 3 年的 ETF；• 过滤过去 60 日任一天成交量＜1,000 万份或出现 NaN 的 ETF；• 未过滤 ST/停牌，因为 ETF 不存在此问题；• 未限制涨跌停/交易状态，由聚宽撮合自动处理。&quot;,
        &quot;buy_signals&quot;: [
            &quot;BiLSTM 得分排名前 3 的 ETF&quot;,
            &quot;账户当前未持有该 ETF&quot;
        ],
        &quot;sell_signals&quot;: [
            &quot;周一重新计算排名后不在前 3 的 ETF&quot;,
            &quot;（强制平仓）ETF 退市 / 长期停牌由 order 失败机制自然退出&quot;
        ],
        &quot;position_and_risk&quot;: &quot;目标持仓数固定 3 只。实际仓位=全部可用现金；新开仓按剩余现金 /（目标数 – 现有持仓数）下单；对已有持仓不再均衡。无止损、无仓位上限、无风险控制。&quot;,
        &quot;trading_frequency&quot;: &quot;每周一次（run_weekly），具体在每周一 9:30 盘中提交市价单（order_target_value）。&quot;,
        &quot;manual_execution_guide&quot;: &quot;若人工执行，可在每周一开盘前运行脚本获取 Top3 ETF 名单；9:30 左右按等资金买入/卖出即可。其余时间无需操作。&quot;
    },
    
    &quot;future_function_detection&quot;: {
        &quot;has_future_function&quot;: &quot;否&quot;,
        &quot;risk_level&quot;: &quot;低&quot;,
        &quot;risk_score&quot;: 2,
        &quot;risk_score_reason&quot;: &quot;所有核心数据通过 attribute_history、get_all_securities 等回测安全函数获取，且显式使用 context.previous_date 限定日期，set_option(&#x27;avoid_future_data&#x27;,True) 已开启。&quot;,
        &quot;detailed_analysis&quot;: {
            &quot;price_data_leak&quot;: &quot;attribute_history 默认不含未来数据；使用的日期为昨日 (context.previous_date) -&gt; 安全&quot;,
            &quot;financial_data_leak&quot;: &quot;未调用财务/因子接口 -&gt; 无风险&quot;,
            &quot;index_component_leak&quot;: &quot;未使用指数成分信息 -&gt; 无风险&quot;,
            &quot;backtest_engine_leak&quot;: &quot;无直接调用 history/adj_factor 等易错函数；slippage=0 但不影响未来函数检测&quot;
        },
        &quot;fix_suggestions&quot;: &quot;维持现状即可；如要更保险，可把 attribute_history last_available_date 参数显式设为 context.previous_date。&quot;,
        &quot;gray_area_warnings&quot;: [
            &quot;外部加载的 .pt 模型文件若使用未来数据训练，无法通过代码审计发现&quot;,
            &quot;set_slippage(0) 仅回测可行，实盘需设置合理滑点模型&quot;,
            &quot;大量 ETF 上市不足 3 年被排除，可能导致未来 3 年时该条件意外改变带来样本不一致&quot;
        ]
    },
    
    &quot;execution_difficulty&quot;: {
        &quot;slippage_score&quot;: 3,
        &quot;slippage_reason&quot;: &quot;ETF 流动性总体好、周级调仓、盘中成交；但部分窄基 ETF 或成交量边缘品种仍可能有 1-3 跳滑点。&quot;,
        &quot;cost_score&quot;: 3,
        &quot;cost_reason&quot;: &quot;周频全部换仓上限 3 只，预期年化换手约 50-200%，佣金+卖出红利税约 0.06%/周 =&gt; 3 分&quot;,
        &quot;execution_score&quot;: 8,
        &quot;execution_reason&quot;: &quot;买卖总共 3 只 ETF，流动性良好，市价单即可完全成交，拆单需求低。&quot;,
        &quot;time_sensitivity_score&quot;: 4,
        &quot;time_sensitivity_reason&quot;: &quot;仅周一 9:30 下单，对分钟级行情不敏感；错过当天上午也可补单。&quot;,
        &quot;overall_executability&quot;: 8,
        &quot;overall_reason&quot;: &quot;低换手+高流动性品种+周调仓，资金容量高，执行简单。&quot;,
        &quot;scenario_analysis&quot;: {
            &quot;10w&quot;: &quot;几乎无滑点，全部成交一次即可&quot;,
            &quot;100w&quot;: &quot;同上，ETF 成交量足够&quot;,
            &quot;1000w&quot;: &quot;需注意极小众 ETF 的深度；可以分批成交，但仍可执行&quot;,
            &quot;1y&quot;: &quot;若持仓集中于宽基 ETF 影响很小；若不慎挑到小众 ETF，需预估日成交额&gt;10 倍单次交易额&quot;
        },
        &quot;improvement_suggestions&quot;: [
            &quot;为实盘加入基于成交额或申赎规模的流动性过滤&quot;,
            &quot;增加再均衡逻辑使已持仓与新仓等权，减少单只过度暴露&quot;
        ]
    },
    
    &quot;effectiveness&quot;: {
        &quot;large_fund_unfriendly_score&quot;: 4,
        &quot;large_fund_unfriendly_reason&quot;: &quot;ETF 容量大，策略只持 3 只，容量不成问题，打 4 分&quot;,
        &quot;behavioral_bias_score&quot;: 5,
        &quot;behavioral_bias_reason&quot;: &quot;BiLSTM 模型隐式捕捉动量/情绪，存在一定行为偏差利用，但不显著&quot;,
        &quot;cross_period_robustness_score&quot;: 5,
        &quot;cross_period_robustness_reason&quot;: &quot;模型需再训练；若环境变化或新 ETF 上市，稳定性未知，给 5 分&quot;,
        &quot;effectiveness_total_score&quot;: 5.0,
        &quot;weight_explanation&quot;: &quot;大资金不友好40% + 行为偏差30% + 稳健性30%&quot;,
        &quot;worst_environments&quot;: [
            &quot;单边下跌的熊市（ETF 普遍同步下跌）&quot;,
            &quot;训练-交易环境结构突变（如监管大幅调整、样本外失效）&quot;
        ],
        &quot;verifiable_predictions&quot;: [
            &quot;Top3 得分 ETF 未来一周平均收益率高于 ETF 全体均值&quot;,
            &quot;选中 ETF 与市场基准 000985.XSHG 的超额收益为正&quot;,
            &quot;持仓集中度（单只权重）随时间拉大，收益波动会随之上升&quot;
        ]
    },
    
    &quot;conclusion&quot;: {
        &quot;verdict&quot;: &quot;简洁的周频 ETF 轮动策略，执行容易但长期有效性依赖黑箱 BiLSTM 模型，可作为小到中等规模资金的探索。&quot;,
        &quot;recommendation&quot;: &quot;小仓实测&quot;,
        &quot;optimization_suggestions&quot;: &quot;1) 加入风险控制与再均衡；2) 引入流动性/费率约束；3) 定期重训并采用滑窗训练以提高稳健性&quot;
    },
    
    &quot;score_summary&quot;: {
        &quot;future_function_risk&quot;: 2,
        &quot;slippage&quot;: 3,
        &quot;cost&quot;: 3,
        &quot;execution&quot;: 8,
        &quot;time_sensitivity&quot;: 4,
        &quot;executability&quot;: 8,
        &quot;effectiveness_a&quot;: 4,
        &quot;effectiveness_b&quot;: 5,
        &quot;effectiveness_c&quot;: 5,
        &quot;effectiveness_total&quot;: 5.0
    },
    
    &quot;assumptions&quot;: [
        &quot;未提供资金规模，假设从 10 万到 1 亿元评估&quot;,
        &quot;回测/实盘均使用市场价成交；费率采用代码默认设置；未考虑实际滑点&quot;
    ]
}
```</pre>
        </div>

    </div>
</body>
</html>